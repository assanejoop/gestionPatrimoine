<div class="min-h-screen bg-fourth p-6 max-w-7xl mx-auto ">
    <!-- Header -->
    <div class="mb-8">
      <div class="flex items-center justify-between">
        <div>
          <h1 class="text-3xl font-bold text-dark">Géolocalisation et Densité</h1>
          <p class="text-gray-600 mt-1">Visualiser la couverture spatiale et la densité immobilière</p>
        </div>
        
        <!-- Controls -->
        <div class="flex flex-col sm:flex-row gap-4 items-start sm:items-center">
          <!-- Period Selector -->
          <div class="relative">
            <select 
              class="appearance-none bg-white  rounded-lg px-4 py-2 pr-8 text-dark focus:outline-none focus:ring-2  font-inter" >
              <option class="text-dark text-sm font-inter" value="periode"> <i class="fa-regular fa-calendar"></i> Période</option>
              <option>Cette semaine</option>
              <option>Ce mois</option>
              <option selected>Cette année</option>
              <option>Toutes les périodes</option>
            </select>
            <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-dark">
              <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/>
              </svg>
            </div>
          </div>
          
  
          
          <!-- Region Selector -->
          <div class="relative">
            <select 
              class="appearance-none bg-white rounded-[10px] px-4 py-2 pr-8 text-dark focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
              <option>Région</option>
              <option selected>Toutes les régions</option>
              <option>Dakar</option>
              <option>Thiès</option>
              <option>Saint-Louis</option>
            </select>
            <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-dark">
              <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                <path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/>
              </svg>
            </div>
          </div>
          
          <div class="relative inline-block text-left">
            <!-- Bouton principal -->
            <button 
            (click)="toggleDropdown()"
              class="bg-[#3072BC] hover:bg-[#3072BC] text-white px-6 py-2 rounded-[5px] flex items-center gap-2 transition-colors duration-200 p-[10px]">
              <!-- <i class="fa-solid fa-up-right-from-square"></i> -->
               <img src="assets/images/icones/export.png" alt="" srcset="">
              Exporter
            </button>
      
            <!-- Menu dropdown -->
            <div
              *ngIf="isOpen"
              class="absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-lg bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"
              [@slideInOut]
            >
              <div class="py-1">
                <!-- En-tête du dropdown -->
                <div class="px-4 py-2 text-sm text-gray-500 border-b border-gray-100">
                  Exporter sous
                </div>
                
                <!-- Option PDF -->
                <button
                  (click)="exportToPDF()"
                  class="group flex items-center w-full px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 hover:text-gray-900 transition-colors duration-150"
                >
                  <!-- Icône PDF -->
                  <div class="flex-shrink-0 w-8 h-8 mr-3  rounded flex items-center justify-center">
                    <img src="assets/images/icones/pdf.png" alt="" srcset="">
                  </div>
                  <span class="font-medium">PDF</span>
                </button>
      
                <!-- Option Excel -->
                <button
                  (click)="exportToExcel()"
                  class="group flex items-center w-full px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 hover:text-gray-900 transition-colors duration-150"
                >
                  <!-- Icône Excel -->
                  <div class="flex-shrink-0 w-8 h-8 mr-3 rounded flex items-center justify-center">
                    <img src="assets/images/icones/excel.png" alt="" srcset="">
                  </div>
                  <span class="font-medium">EXCEL</span>
                </button>
              </div>
            </div>
          </div>
         
        </div>
      </div>
    </div>
  
    <!-- Stats Cards -->
     
       
   
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    
      <!-- Bâtiments géolocalisés -->
      <div class="bg-white  w-[400px] h-[106px] rounded-xl gap-3 opacity-100 p-5 ">
        <div class="flex items-center justify-between">
          <div>
            <h3 class="text-3xl font-bold text-gray-900">{{ stats().geolocalizedBuildings }}</h3>
            <p class="text-gray-600 mt-1">Bâtiments géolocalisés</p>
          </div>
          <div class="w-12 h-12 bg-white shadow-[0px_2px_10px_0px_#7C8DB51F] rounded-lg flex items-center justify-center">
            <img src="assets/images/icones/users1.png" alt="" srcset="">
          </div>
        </div>
      </div>
  
      <!-- Sans coordonnées -->
      <div class="bg-white rounded-xl w-[400px] h-[106px] gap-3 opacity-100 p-5 ">
        <div class="flex items-center justify-between">
          <div>
            <h3 class="text-3xl font-bold text-gray-900">{{ stats().nonGeolocalizedBuildings }}</h3>
            <p class="text-gray-600 mt-1">Sans coordonnées</p>
          </div>
          <div class="w-12 h-12  bg-white shadow-[0px_2px_10px_0px_#7C8DB51F] rounded-lg flex items-center justify-center">
            <img src="assets/images/icones/check.png" alt="" srcset="">
             </div>
        </div>
      </div>
  
      <!-- Taux de complétion -->
      <div class="bg-white w-[400px] h-[106px] rounded-xl gap-3 opacity-100 p-5">
        <div class="flex items-center justify-between">
          <div>
            <h3 class="text-3xl font-bold text-gray-900">{{ stats().completionRate }}%</h3>
            <p class="text-gray-600 mt-1">Taux de complétion</p>
          </div>
          <div class="w-12 h-12  bg-white shadow-[0px_2px_10px_0px_#7C8DB51F] rounded-lg flex items-center justify-center">
            <img src="assets/images/icones/check.png" alt="" srcset="">
             </div>
        </div>
      </div>
    </div>
  
  
    <!-- Main Content -->
     <div class=" h-[521px] top-[315px] left-[300px] rounded-xl opacity-100 bg-white w-full">

      <div class="flex flex-col lg:flex-row gap-4 p-4">
        <!-- Carte Leaflet -->
        <div class="w-full lg:w-3/4 h-[480px] rounded-xl overflow-hidden ">
          <div id="map" class="w-full h-full rounded-xl"></div>
        </div>
      
        <!-- Légende -->
         <div class="flex flex-col">
          <h2 class="text-lg font-semibold text-dark  mb-4">Légende</h2>
          <ul class="space-y-3">
            <li class="flex items-center">
              <div class="w-[10px] h-[10px] rounded-full bg-[#2388FF] mr-2"></div>
              <span class="text-sm text-indigo">Bâtiments géolocalisés</span>
            </li>
            <li class="flex items-center">
              <div class="w-[10px] h-[10px] rounded-full bg-[#14BA6D] mr-2 "></div>
              <span class="text-sm text-indigo">Bâtiments sans coordonnées GPS</span>
            </li>
          </ul>
        </div>
      </div>
     </div>
    
    
  </div>